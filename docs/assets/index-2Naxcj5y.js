(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const w=15,h="cv_data";(function(){const y=document.querySelector(".js-download-pdf"),i=document.querySelector(".js-clear-data"),r=document.querySelectorAll(".editable");document.addEventListener("click",function(e){const t=e.target.closest(".ripple");if(!t)return;const s=t.getBoundingClientRect(),u=Math.max(s.width,s.height),c=e.clientX-s.left-u/2,m=e.clientY-s.top-u/2,a=document.createElement("span");a.className="ripple__wave",a.style.width=a.style.height=u+"px",a.style.left=c+"px",a.style.top=m+"px",t.appendChild(a),a.addEventListener("animationend",()=>a.remove())}),document.addEventListener("DOMContentLoaded",()=>{try{const e=JSON.parse(localStorage.getItem(h)||"{}");r.forEach(t=>{const s=t.dataset.key;e[s]&&(t.textContent=e[s])})}catch(e){console.warn("Local storage parse error",e)}});let d;const n=()=>{const e={};r.forEach(t=>e[t.dataset.key]=t.textContent.trim()),localStorage.setItem(h,JSON.stringify(e))},o=()=>{clearTimeout(d),d=setTimeout(n,400)},l=e=>{e.isContentEditable||(e.contentEditable=!0,S(e))},b=e=>{e.isContentEditable&&(e.contentEditable=!1,e.classList.remove("u-anim-edit"),e.offsetWidth,e.classList.add("u-anim-edit"),o())};document.addEventListener("click",e=>{const t=e.target.closest(".editable");t&&l(t)}),r.forEach(e=>{e.addEventListener("blur",()=>b(e)),e.addEventListener("keydown",t=>{t.key==="Enter"&&(t.preventDefault(),e.blur())})}),i.addEventListener("click",()=>{localStorage.removeItem(h),location.reload()}),y.addEventListener("click",async()=>{r.forEach(g=>{g.isContentEditable&&g.blur()}),r.forEach(g=>g.classList.remove("u-anim-edit")),document.body.classList.add("pdf-mode");const e=document.getElementById("resume"),s=(await html2canvas(e,{scale:2,backgroundColor:"#fff"})).toDataURL("image/png");document.body.classList.remove("pdf-mode");const{jsPDF:u}=window.jspdf,c=new u("p","mm","a4"),m=c.internal.pageSize.getWidth(),a=c.internal.pageSize.getHeight(),v=c.getImageProperties(s),E=v.width/v.height,C=m-w*2,L=a-w*2;let p=C,f=p/E;f>L&&(f=L,p=f*E);const x=(m-p)/2,O=(a-f)/2;c.addImage(s,"PNG",x,O,p,f),c.save("resume.pdf")});const S=e=>{e.focus();const t=document.createRange();t.selectNodeContents(e),t.collapse(!1);const s=window.getSelection();s.removeAllRanges(),s.addRange(t)}})();
